---
import BaseLayout from '../layouts/BaseLayout.astro';
import PromoSlider from '../components/PromoSlider.astro';
import CasinoCard from '../components/CasinoCard.astro';
import SectionTitle from '../components/SectionTitle.astro';
import { casinos } from '../data/casinos';
---

<BaseLayout title="–î–ï–ü–•–ê–ë - –ì–ª–∞–≤–Ω–∞—è" activeTab="home" activeCategory="casino">
      <main id="category-content">
        <!-- Casino Content (default) -->
        <div class="category-section" data-category="casino">
          <PromoSlider
            sliderId="promo-slider-casino"
            slides={[
              {
                imageSrc: '/images/slider_main/1win.avif',
                title: '1WIN',
                subtitle: '–õ—É—á—à–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã',
                buttonText: '–ò–≥—Ä–∞—Ç—å',
              },
              {
                imageSrc: '/images/slider_main/1xbet.avif',
                title: '1XBET',
                subtitle: '–ë–æ–Ω—É—Å –¥–æ 200%',
                buttonText: '–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å',
              },
              {
                imageSrc: '/images/slider_main/1xbet_2.avif',
                title: '1XBET –ë–∞—Å–∫–µ—Ç–±–æ–ª',
                subtitle: '–°—Ç–∞–≤–∫–∏ –Ω–∞ —Å–ø–æ—Ä—Ç',
                buttonText: '–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É',
              },
            ]}
          />

          <!-- Top Casinos -->
          <SectionTitle icon="üèÜ" title="–¢–û–ü-10 –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è" />
          <div class="casinos-scroll">
            {casinos.map((casino) => (
              <CasinoCard
                rank={casino.rank}
                name={casino.name}
                logoSrc={casino.logoSrc}
                rating={casino.rating}
                bonus={casino.bonus}
                freeSpins={casino.freeSpins}
                deposit={casino.deposit}
              />
            ))}
          </div>

          <!-- Popular -->
          <SectionTitle icon="üî•" title="–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ" />
          <div class="casinos-list">
            {casinos.map((casino) => (
              <div class="casino-row">
                <div class="casino-info">
                  {casino.logoSrc && <img src={casino.logoSrc} alt={casino.name} class="casino-logo-small" />}
                  <div>
                    <h3>{casino.name}</h3>
                    <div class="casino-meta">
                      <span class="rating">‚òÖ {casino.rating}</span>
                      {casino.bonus && <span class="bonus-tag">{casino.bonus}</span>}
                      {casino.freeSpins && <span class="fs-tag">{casino.freeSpins}</span>}
                    </div>
                  </div>
                </div>
                <button class="play-btn">–ò–≥—Ä–∞—Ç—å</button>
              </div>
            ))}
          </div>
        </div>

        <!-- Bets Content -->
        <div class="category-section" data-category="bets" style="display: none;">
          <PromoSlider
            sliderId="promo-slider-bets-main"
            slides={[
              {
                imageSrc: '/images/slider_main/1xbet_2.avif',
                title: '1WIN –°—Ç–∞–≤–∫–∏',
                subtitle: '–õ—É—á—à–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã',
                buttonText: '–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É',
                gradient: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)',
              },
              {
                imageSrc: '/images/slider_main/1xbet.avif',
                title: '1XBET',
                subtitle: '–ë–æ–Ω—É—Å –¥–æ 200%',
                buttonText: '–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å',
                gradient: 'linear-gradient(135deg, #4caf50 0%, #388e3c 100%)',
              },
              {
                imageSrc: '/images/slider_main/1win.avif',
                title: '1XBET –ë–∞—Å–∫–µ—Ç–±–æ–ª',
                subtitle: '–°—Ç–∞–≤–∫–∏ –Ω–∞ —Å–ø–æ—Ä—Ç',
                buttonText: '–ò–≥—Ä–∞—Ç—å',
                gradient: 'linear-gradient(135deg, #ff9800 0%, #f57c00 100%)',
              },
            ]}
          />

          <SectionTitle icon="üèÜ" title="–ë—É–∫–º–µ–∫–µ—Ä" />
          <div class="casinos-scroll">
            {casinos.map((casino) => (
              <CasinoCard
                rank={casino.rank}
                name={casino.name}
                logoSrc={casino.logoSrc}
                rating={casino.rating}
                bonus={casino.bonus}
                freeSpins={casino.freeSpins}
                deposit={casino.deposit}
              />
            ))}
          </div>
        </div>

        <!-- Poker Content -->
        <div class="category-section" data-category="poker" style="display: none;">
          <PromoSlider
            sliderId="promo-slider"
            slides={[
              {
                imageSrc: '/images/slider_main/1xbet.avif',
                title: '1WIN –ü–æ–∫–µ—Ä',
                subtitle: '–¢—É—Ä–Ω–∏—Ä—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å',
                buttonText: '–ò–≥—Ä–∞—Ç—å',
                gradient: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)',
              },
              {
                imageSrc: '/images/slider_main/1win.avif',
                title: '1XBET –ü–æ–∫–µ—Ä',
                subtitle: '–ë–æ–Ω—É—Å –¥–æ 500%',
                buttonText: '–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å',
                gradient: 'linear-gradient(135deg, #2196f3 0%, #1976d2 100%)',
              },
              {
                imageSrc: '/images/slider_main/1xbet_2.avif',
                title: '1XBET –ü–æ–∫–µ—Ä',
                subtitle: '–õ—É—á—à–∏–µ —Ç—É—Ä–Ω–∏—Ä—ã',
                buttonText: '–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å',
                gradient: 'linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%)',
              },
            ]}
          />

          <!-- <SectionTitle icon="üèÜ" title="–¢–û–ü-10 –ü–æ–∫–µ—Ä–Ω—ã—Ö-–∫–æ–º–Ω–∞—Ç" /> -->
          <div class="casinos-scroll">
            {casinos.map((casino) => (
              <CasinoCard
                rank={casino.rank}
                name={casino.name}
                logoSrc={casino.logoSrc}
                rating={casino.rating}
                bonus={casino.bonus}
                freeSpins={casino.freeSpins}
                deposit={casino.deposit}
              />
            ))}
          </div>
        </div>

        <!-- Disclaimer -->
        <div class="disclaimer">
          <p>DepHub –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–Ω–ª–∞–π–Ω-–∫–∞–∑–∏–Ω–æ, –±—É–∫–º–µ–∫–µ—Ä—Å–∫–æ–π –∫–æ–Ω—Ç–æ—Ä–æ–π –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º –∞–∑–∞—Ä—Ç–Ω—ã—Ö –∏–≥—Ä.</p>
          <p>DepHub –ª–∏—à—å –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.</p>
          <p>DepHub –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∞–π—Ç–∞—Ö.</p>
          <p>–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ –≤–∞–º –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å 18 –ª–µ—Ç –∏ –≤—ã –æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏.</p>
          <p>DepHub –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.</p>
          <div class="disclaimer-icons">
            <span>‚úã</span>
            <span>18+</span>
          </div>
          <p class="copyright">¬© 2025 DEPHUB. All rights reserved</p>
        </div>
      </main>

      <script>
        let currentCategory: 'casino' | 'bets' | 'poker' = 'casino';
        
        function showCategory(category: 'casino' | 'bets' | 'poker') {
          if (currentCategory === category) return;
          
          const sections = document.querySelectorAll<HTMLElement>('.category-section');
          const currentSection = Array.from(sections).find(
            s => s.getAttribute('data-category') === currentCategory
          ) as HTMLElement;
          const newSection = Array.from(sections).find(
            s => s.getAttribute('data-category') === category
          ) as HTMLElement;
          
          if (!currentSection || !newSection) return;
          
          currentSection.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease';
          newSection.style.transition = 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease';
          
          currentSection.style.transform = 'translateX(-100%)';
          currentSection.style.opacity = '0';
          
          newSection.style.display = 'block';
          newSection.style.transform = 'translateX(100%)';
          newSection.style.opacity = '0';
          
          requestAnimationFrame(() => {
            newSection.style.transform = 'translateX(0)';
            newSection.style.opacity = '1';
          });
          
          setTimeout(() => {
            currentSection.style.display = 'none';
            currentSection.style.transform = '';
            currentSection.style.opacity = '';
            currentSection.style.transition = '';
          }, 300);
          
          currentCategory = category;
        }
        
        window.addEventListener('categoryChange', ((e: CustomEvent<{ category: 'casino' | 'bets' | 'poker' }>) => {
          showCategory(e.detail.category);
        }) as EventListener);
        
        const initialSection = document.querySelector<HTMLElement>('.category-section[data-category="casino"]');
        if (initialSection) {
          initialSection.style.display = 'block';
          initialSection.style.opacity = '1';
        }

      </script>
</BaseLayout>

<style lang="scss">
  main {
    padding-bottom: $spacing-xl;
    position: relative;
    overflow-x: hidden;
  }

  .category-section {
    width: 100%;
    will-change: transform, opacity;
    position: relative;
    overflow-x: hidden;
  }

  .casinos-scroll {
    display: flex;
    gap: $spacing-md;
    overflow-x: auto;
    padding: 0 $spacing-sm $spacing-md;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  .casinos-scroll > * {
    scroll-snap-align: start;
    flex-shrink: 0;
  }

  .casinos-list {
    padding: 0 $spacing-sm;
  }

  .casino-row {
    background: $bg-card;
    border-radius: $radius-md;
    padding: 0 $spacing-sm;
    margin-bottom: $spacing-sm;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: $spacing-md;
  }

  .casino-info {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    flex: 1;
  }

  .casino-logo-small {
    width: 70px;
    height: 70px;
    border-radius: $radius-sm;
    object-fit: contain;
    background: transparent;
    flex-shrink: 0;
  }

  .casino-info h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 4px;
  }

  .casino-meta {
    display: flex;
    align-items: center;
    gap: $spacing-xs;
    flex-wrap: wrap;
  }

  .rating {
    color: $accent-yellow;
    font-size: 13px;
  }

  .bonus-tag {
    background: $accent-green;
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
  }

  .fs-tag {
    background: $accent-blue;
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
  }

  .play-btn {
    background: $accent-green;
    color: white;
    padding: $spacing-sm $spacing-md;
    border-radius: $radius-sm;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
  }

  .disclaimer {
    padding: $spacing-lg $spacing-sm;
    font-size: 11px;
    color: $text-secondary;
    line-height: 1.6;
  }

  .disclaimer p {
    margin-bottom: $spacing-xs;
  }

  .disclaimer-icons {
    display: flex;
    gap: $spacing-sm;
    margin: $spacing-md 0;
  }

  .disclaimer-icons span {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
  }

  .copyright {
    margin-top: $spacing-md;
    text-align: center;
    font-size: 10px;
  }
</style>

